config:
  output_dir: ./output/
  # memory_limit: 2GB
  # show_stacktrace: True
  # show_graph: True
  # log_level: DEBUG

sources:
  attendance:
    file: ./sources/attendance.tsv
    header_rows: 1
  testing_source:
    file: 
    header_rows: 1
    optional: True # this prevents an error due to `file` being blank... testing_destination just won't be created
    columns: # this is optional UNLESS header_rows=0 OR optional=True
      - day
      - section
      - student_id
      - absent

transformations:
  attendance:
    operations:
      - operation: map_values
        source: $sources.attendance
        column: absent
        mapping:
          "TRUE": absent
          "FALSE": present
      - operation: rename_columns
        source: $transformations.attendance
        columns:
          absent: status
          section: session
      - operation: add_columns
        source: $transformations.attendance
        columns:
          school: 12345

destinations:
  studentSchoolAttendanceEvents:
    source: $transformations.attendance
    template: ./templates/studentSchoolAttendanceEvent.jsont
    extension: jsonl
    linearize: True
  testing_destination:
    source: $sources.testing_source
    template: ./templates/studentSchoolAttendanceEvent.jsont
    extension: jsonl
    linearize: True